{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-8 mx-auto">
    <h2 class="mb-4">{{ title }}</h2>
    <form method="post" class="row g-3">
      {% csrf_token %}
      
      <div class="col-md-12">
        <h5 class="border-bottom pb-2 mb-3">Patient Information</h5>
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.patient_id.label }} <span class="text-danger">*</span></label>
        {{ form.patient_id }}
        {% if form.patient_id.errors %}
          <div class="text-danger small">{{ form.patient_id.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.gender.label }} <span class="text-danger">*</span></label>
        {{ form.gender }}
        {% if form.gender.errors %}
          <div class="text-danger small">{{ form.gender.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.first_name.label }} <span class="text-danger">*</span></label>
        {{ form.first_name }}
        {% if form.first_name.errors %}
          <div class="text-danger small">{{ form.first_name.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.last_name.label }} <span class="text-danger">*</span></label>
        {{ form.last_name }}
        {% if form.last_name.errors %}
          <div class="text-danger small">{{ form.last_name.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.date_of_birth.label }} <span class="text-danger">*</span></label>
        {{ form.date_of_birth }}
        {% if form.date_of_birth.errors %}
          <div class="text-danger small">{{ form.date_of_birth.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.blood_type.label }}</label>
        {{ form.blood_type }}
        {% if form.blood_type.errors %}
          <div class="text-danger small">{{ form.blood_type.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-12">
        <h5 class="border-bottom pb-2 mb-3 mt-4">Contact Information</h5>
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.email.label }} <span class="text-danger">*</span></label>
        {{ form.email }}
        {% if form.email.errors %}
          <div class="text-danger small">{{ form.email.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.phone.label }} <span class="text-danger">*</span></label>
        {{ form.phone }}
        {% if form.phone.errors %}
          <div class="text-danger small">{{ form.phone.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-12">
        <label class="form-label">{{ form.address.label }}</label>
        {{ form.address }}
        {% if form.address.errors %}
          <div class="text-danger small">{{ form.address.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-12">
        <h5 class="border-bottom pb-2 mb-3 mt-4">Emergency Contact</h5>
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.emergency_contact_name.label }}</label>
        {{ form.emergency_contact_name }}
        {% if form.emergency_contact_name.errors %}
          <div class="text-danger small">{{ form.emergency_contact_name.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-6">
        <label class="form-label">{{ form.emergency_contact_phone.label }}</label>
        {{ form.emergency_contact_phone }}
        {% if form.emergency_contact_phone.errors %}
          <div class="text-danger small">{{ form.emergency_contact_phone.errors }}</div>
        {% endif %}
      </div>
      
      <div class="col-md-12">
        <h5 class="border-bottom pb-2 mb-3 mt-4">Medical Information</h5>
      </div>
      
      <div class="col-md-12">
        <label class="form-label">{{ form.known_allergies.label }}</label>
        {{ form.known_allergies }}
        {% if form.known_allergies.errors %}
          <div class="text-danger small">{{ form.known_allergies.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">{{ form.known_allergies.help_text }}</small>
      </div>
      
      <div class="col-md-12">
        <label class="form-label">{{ form.medical_history.label }}</label>
        {{ form.medical_history }}
        {% if form.medical_history.errors %}
          <div class="text-danger small">{{ form.medical_history.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">{{ form.medical_history.help_text }}</small>
      </div>
      
      <div class="col-12 mt-4">
        <button type="submit" class="btn btn-primary">Save Patient</button>
        {% if patient %}
          <a href="{% url 'patient_detail' patient.pk %}" class="btn btn-secondary">Cancel</a>
        {% else %}
          <a href="{% url 'patient_list' %}" class="btn btn-secondary">Cancel</a>
        {% endif %}
      </div>
    </form>
  </div>
</div>
{% endblock %}

